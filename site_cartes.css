:root{
  --jaune-fond:#FCFC04;
  --rouge:#F62308;
  --noir:#1a1a1a;
  --ombre:rgba(0,0,0,0.35);

  /* pour éviter que les tabs cachent les premières cartes */
  --hero-compact-h: 20vh;
  --tabs-h: 68px;
  --tabs-gap: 200px; /* marge visuelle sous les tabs */
}

/* RESET */
*{ box-sizing:border-box; }

body{
  margin:0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  color:var(--noir);
  background:url("fond_carte.png") center/cover fixed no-repeat;
}

/* =========================
   HERO
========================= */
.hero{
  position:fixed;
  top:0; left:0; right:0;
  height:100vh;
  background:var(--jaune-fond);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:50;
  box-shadow:none;
}

.hero-inner{ text-align:center; }
.hero-title-stack{ line-height:0.85; }

.hero-title-line{
  display:block;
  font-size:clamp(4rem,18vw,8rem);
  font-weight:900;
  letter-spacing:0.2em;
  text-transform:uppercase;
  color:#000;
  text-shadow:
    0 0 0 #000,
    6px 0 0 #F62308,
    -6px 0 0 #00aa4a;
}

.hero-sub{
  margin-top:16px;
  font-size:0.85rem;
  text-transform:uppercase;
  letter-spacing:0.2em;
  opacity:0.85;
}

/* HERO COMPACT */
.hero.compact{
  height:var(--hero-compact-h);
  align-items:flex-end;
  padding-bottom:14px;
}

.hero.compact .hero-title-line{
  font-size:clamp(2.6rem,9vw,4.2rem);
  letter-spacing:0.22em;
  text-shadow:
    0 0 0 #000,
    4px 0 0 #F62308,
    -4px 0 0 #00aa4a;
}

.hero.compact .hero-title-stack{ line-height:0.75; }
.hero.compact .hero-sub{ font-size:0.75rem; margin-top:8px; }

/* =========================
   CALQUE FOND
========================= */
.fond-layer{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:5;
  background-position:center;
  background-repeat:no-repeat;
  background-size:cover;
  opacity:0;
  transition:opacity 0.5s ease;
}

/* =========================
   SIGNET FOND
========================= */
.fond-signet{
  position:fixed;
  bottom:20px;
  right:20px;
  z-index:30;

  background:var(--rouge);
  border-radius:0;
  padding:6px 10px;

  opacity:0;
  transition:opacity 0.35s ease;
}

.fond-signet.visible{ opacity:1; }

#fond-signet-text{
  display:block;
  writing-mode:vertical-rl;
  transform:rotate(180deg);

  color:var(--jaune-fond);
  font-weight:900;
  letter-spacing:0.14em;
  text-transform:uppercase;
  font-size:0.85rem;
  line-height:1;

  text-shadow: 2px 0 0 #000;
}

/* =========================
   CONTENU
========================= */
.page{
  max-width:1200px;
  margin:0 auto;

  /* le contenu commence après le hero plein écran */
  padding:calc(100vh + 10px) 16px 40px;

  position:relative;
  z-index:10;
}

/* Quand le hero est compact, on réserve de la place */
body.hero-compact .page{
  padding-top:calc(var(--hero-compact-h) + 40px);
}

/* Quand les tabs sont FIXED, on réserve aussi leur hauteur */
body.tabs-fixed .page{
  padding-top:calc(var(--hero-compact-h) + var(--tabs-h) + var(--tabs-gap));
}

/* =========================
   ONGLET FIXE
========================= */
.tabs-sticky-wrapper{
  position:fixed;
  top:var(--hero-compact-h);
  left:0;
  right:0;
  width:100vw;
  background:var(--jaune-fond);
  z-index:70; /* plus haut que le hero */

  padding:10px 0 12px;

  opacity:0;
  transform:translateY(-10px);
  pointer-events:none;
  transition: opacity 180ms ease, transform 180ms ease;

  box-shadow:none;
}

body.tabs-fixed .tabs-sticky-wrapper{
  opacity:1;
  transform:translateY(0);
  pointer-events:auto;
}

.tabs{
  display:flex;
  justify-content:center;
  gap:10px;
  flex-wrap:wrap;
}

.tab-btn{
  border-radius:999px;
  border:2px solid var(--rouge);
  background:#fffefd;
  color:var(--rouge);

  font-size:0.75rem;
  font-weight:800;
  text-transform:uppercase;
  letter-spacing:0.12em;

  padding:6px 14px;
  cursor:pointer;

  box-shadow:0 4px 0 #8f0f04;
  transition:transform 0.12s ease, box-shadow 0.12s ease, background 0.12s ease, color 0.12s ease;

  /* IMPORTANT: laisser dépasser le tooltip */
  overflow: visible;
  position: relative;
}

.tab-btn.active{
  background:var(--rouge);
  color:var(--jaune-fond);
}

.tab-btn:active{
  transform:translateY(2px);
  box-shadow:0 2px 0 #8f0f04;
}

.tab-label{ display:inline-block; }

/* =========================
   TOOLTIP ONGLET (s'ouvre vers le BAS)
========================= */
.tab-help{
  position:relative;
  margin-left:8px;
  display:inline-flex;
  align-items:center;
  justify-content:center;

  width:18px;
  height:18px;

  border-radius:50%;
  background:var(--rouge);
  color:var(--jaune-fond);

  font-size:0.65rem;
  font-weight:900;
  cursor:help;

  /* pour être au-dessus du bouton */
  z-index:2;
}

.tab-tooltip{
  position:absolute;
  top:calc(100% + 10px);   /* <-- vers le bas */
  left:50%;
  transform:translateX(-50%) translateY(-6px);

  min-width:240px;
  max-width:300px;

  background:#000;
  color:#fff;
  padding:10px 12px;

  font-size:0.72rem;
  line-height:1.45;
  letter-spacing:0.04em;
  text-transform:none;

  border:2px solid #111;
  box-shadow:0 12px 28px rgba(0,0,0,0.35);

  opacity:0;
  pointer-events:none;

  transition:opacity 0.18s ease, transform 0.18s ease;

  z-index:9999;
  white-space:normal;
}

/* petite flèche (vers le haut) */
.tab-tooltip::after{
  content:"";
  position:absolute;
  bottom:100%;
  left:50%;
  transform:translateX(-50%);
  border:7px solid transparent;
  border-bottom-color:#000;
}

.tab-help:hover .tab-tooltip,
.tab-help:focus-within .tab-tooltip{
  opacity:1;
  transform:translateX(-50%) translateY(0);
}

/* =========================
   GRID
========================= */
.grid{
  display:flex;
  flex-wrap:wrap;
  gap:30px;
  justify-content:center;
}

/* Transition changement d’onglet */
.cards-enter-active,
.cards-leave-active{
  transition:opacity 220ms ease, transform 220ms ease;
}

.cards-enter-from,
.cards-leave-to{
  opacity:0;
  transform:translateY(10px);
}

/* =========================
   SONG CARD
========================= */
.song-card{
  width:500px;
  background:#fffefd;
  border:2px solid var(--rouge);
  box-shadow:0 18px 45px var(--ombre);
  overflow:hidden;

  opacity:0;
  transform:translateY(40px);
  transition:opacity 0.6s ease, transform 0.6s ease;
}

.song-card.visible{
  opacity:1;
  transform:translateY(0);
}

/* HEADER */
.song-header{
  display:flex;
  align-items:stretch;
  background:var(--jaune-fond);
  border-bottom:2px solid var(--rouge);
}

.song-header-strip{
  width:38px;
  background:var(--rouge);
  display:flex;
  align-items:center;
  justify-content:center;
}

.song-strip-text{
  writing-mode:vertical-rl;
  text-orientation:mixed;
  color:var(--jaune-fond);
  font-weight:800;
  font-size:0.95rem;
  letter-spacing:0.15em;
}

.song-header-main{
  flex:1;
  display:flex;
}

/* ARTISTE */
.song-header-artist{
  flex:1.1;
  padding:8px 10px;
  border-left:2px solid var(--rouge);
  border-right:2px solid var(--rouge);
  text-align:center;
  font-weight:900;
  letter-spacing:0.1em;
  display:flex;
  align-items:center;
  justify-content:center;
}

.song-artist-glitch{
  font-size:0.8rem;
  color:#000;
}

/* TITRE */
.song-header-title{
  flex:1.4;
  position:relative;

  display:flex;
  align-items:center;
  justify-content:center;

  padding:6px 10px;
  text-align:center;

  text-transform:uppercase;
  color:var(--rouge);
  letter-spacing:0.1em;
  font-weight:900;
}

.song-header-title::before{
  content:"";
  position:absolute;
  inset:0;
  border:5px solid var(--rouge);
  pointer-events:none;
}

.song-title-text{
  position:relative;
  z-index:1;
  display:block;
  width:100%;
  text-align:center;
  line-height:1.05;
  word-break:break-word;
  overflow-wrap:anywhere;
}

/* BODY */
.song-body{
  display:flex;
  flex-direction:row-reverse;
  gap:16px;
  padding:12px 14px 14px;
}

.song-info{
  flex:1;
  display:flex;
  flex-direction:column;
  gap:10px;
}

.song-comment{ margin:0; }

.song-meta{
  margin:0;
  font-size:0.85rem;
  opacity:0.8;
}

.song-cover-wrapper{
  display:flex;
  align-items:flex-start;
  justify-content:flex-start;
}

.song-cover{
  width:120px;
  height:120px;
  border-radius:8px;
  border:2px solid var(--rouge);
  object-fit:cover;
  background:var(--jaune-fond);
}

/* PLAY */
.play-button{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:6px 14px;
  border-radius:999px;
  border:2px solid var(--rouge);
  background:var(--rouge);
  color:var(--jaune-fond);
  font-size:0.8rem;
  font-weight:700;
  text-transform:uppercase;
  letter-spacing:0.12em;
  text-decoration:none;
  cursor:pointer;
  box-shadow:0 4px 0 #8f0f04;
  transition:transform 0.12s ease, box-shadow 0.12s ease, background 0.12s ease;
}

.play-button:active{
  transform:translateY(2px);
  box-shadow:0 2px 0 #8f0f04;
  background:#d91f05;
}

/* Loading / footer */
.loading{
  text-align:center;
  margin-top:40px;
  font-weight:600;
}

.footer{
  margin-top:40px;
  text-align:center;
  font-size:0.8rem;
  opacity:0.8;
}

/* Responsive */
@media (max-width:700px){
  :root{
    --hero-compact-h: 18vh;
    --tabs-h: 78px;
    --tabs-gap: 24px;
  }

  .tabs-sticky-wrapper{ top:var(--hero-compact-h); }
  .song-card{ width:100%; }
}
